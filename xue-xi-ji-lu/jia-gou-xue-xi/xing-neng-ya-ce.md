---
description: 整理系统上线前的压力测试方案设计需要考虑的内容
---

# 性能压测

## 制定范围

制定压测的业务范围，明确本次压测主要负责测试的范围内容

### 优先级排序

1. 主要业务流程
2. 已知的性能瓶颈
3. 高并发可能出现的瓶颈
4. 大数据量可能出现的瓶颈
5. 高网络IO场景
6. 高磁盘IO场景
7. 长事务场景
8. 一般业务场景
9. 系统配置项场景

### 压测目标

#### 业务性

在并发压测的情况下，业务功能的完整性考虑或者业务数据的一致性

#### 性能性

* 响应时间 -- 接口从接收到返回所反馈的时间
* 吞吐量 -- 单位时间业务处理数量
* 并发数 -- 系统最高并发数量
* 错误率 -- 接口调用的错误情况
* 性能指标 -- CPU / Memory / 磁盘IO / 网络IO

#### 可靠性

压测过程的系统是否运行稳定，是否存在内存泄露等问题，需要长时间运行

#### 压测场景

单一业务场景 -- 针对单一接口的压力测试

混合业务场景 -- 针对混合多个业务同时运行的某接口或多接口压力测试

## 准备压测环境

环境准备包括以下内容

### 硬件环境

主要为 CPU / 内容 / 磁盘IO / 网络IO / 负载均衡, 根据测试需求和预期负载来选择硬件设备，确保测试环境能够满足测试需求。

### 软件环境

操作系统、程序版本、数据库设置等软件设备环境，与线上版本及配置保持一致

### 测试数据

需要准备测试数据，以模拟真实的业务场景，测试数据应该具有一定的代表性和复杂性，按照使用场景可能要考虑备份与恢复

### 监控及日志

监控压测过程中的性能数据，系统、业务日志采集，用于观测和定位问题

### 压测脚本/工具

准备压测使用的脚本或者工具，需要能够满足业务场景的模拟和并发要求

## 整体实施方案计划

1. 梳理关键业务接口、缓慢数据接口、全量数据接口
2. 统计、预测实际数据量大小
3. 针对接口制定性能基准
4. 编写压测场景及案例
5. 准备测试环境、包括硬件、软件、数据、监控、工具
6. 开展压测
7. 按照压测结果调整硬件资源、修复性能瓶颈



####
